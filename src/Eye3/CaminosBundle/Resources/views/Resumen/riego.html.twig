{% extends '::base.html.twig' %}
{% block stylesheets %}
{{parent()}}

				<link rel="stylesheet" href="{{ asset('bundles/eye3caminos/css/datepicker.css') }}" />
                <link rel="stylesheet" href="{{ asset('bundles/eye3caminos/css/datepicker3.css') }}" />
 {% javascripts '@data_tables' %}
   

		<!--[if !IE]> -->
		<script type="text/javascript">
			window.jQuery || document.write("<script src='{{ asset('bundles/eye3caminos/js/jquery.js') }}'>"+"<"+"/script>");
		</script>

		<!-- <![endif]-->

		<!--[if IE]>
		<script type="text/javascript">
		 window.jQuery || document.write("<script src='{{ asset('bundles/eye3caminos/js/jquery1x.js') }}'>"+"<"+"/script>");
		</script>
		<![endif]-->
		
		<script type="text/javascript">
			if('ontouchstart' in document.documentElement) document.write("<script src='{{ asset('bundles/eye3caminos/js/jquery.mobile.custom.js') }}'>"+"<"+"/script>");
		</script>
		
 {% endjavascripts %}

{% endblock %}
{% block body %}


		<div class="row" >
                <div class="col-md-4 col-xs-2"></div>
                <div class="col-md-4 col-xs-9">
                        <!-- #section:plugins/date-time.datepicker -->
                                <form action="#" method="POST">
						
						<div class="graficos">
						<div class="input-daterange input-group col-md-8 col-xs-12" >
								<input type="text" class="input-sm form-control" name="start"  placeholder="{{start}}" value="{{start}}"/>
								<span class="input-group-addon">
									<i class="glyphicon glyphicon-arrow-right"></i>
								</span>
								<input type="text" class="input-sm form-control" name="end"  placeholder="{{end}}" value="{{end}}"/>
						</div>
                                <input type="submit" value="ver">
                                </form>
						</div>
                </div>

        </div>
		
				  
		<div class="col-12">
			<div class="page-header"><h1>Resumen Medici√≥n y Riego</h1></div>
		</div>
		
		<div id="placeholder1" > </div>
		<div id="placeholder2" > </div>
					
	
	{% block js %}{% endblock %}
			<script src="{{ asset('bundles/eye3caminos/js/dataTables/jquery.dataTables.min.js') }}" type="text/javascript"></script>
			<script src="{{ asset('bundles/eye3caminos/js/dataTables/jquery.dataTables.bootstrap.js') }}" type="text/javascript"></script>
			<script src="{{ asset('bundles/eye3caminos/js/bootstrap.js') }}" type="text/javascript"></script>
			<script src="{{ asset('bundles/eye3caminos/js/ace/ace.js') }}" type="text/javascript"></script>
			<script src="{{ asset('bundles/eye3caminos/js/ace/ace.sidebar.js') }}" type="text/javascript"></script>
			
			 <script src="{{ asset('bundles/eye3caminos/js/date-time/bootstrap-datepicker.js') }}" type="text/javascript"></script>
            <script src="{{ asset('bundles/eye3caminos/js/date-time/locales/bootstrap-datepicker.es.js') }}" type="text/javascript"></script>

            <script src="{{ asset('bundles/eye3caminos/js/flot/jquery.flot.min.js') }}" type="text/javascript"></script>
			<script src="{{ asset('bundles/eye3caminos/js/flot/jquery.flot.symbol.js') }}"></script>
			<script src="{{ asset('bundles/eye3caminos/js/flot/jquery.flot.axislabels.js') }}"></script>
			<script src="{{ asset('bundles/eye3caminos/js/flot/jquery.flot.time.min.js') }}"></script>
			<script src="{{ asset('bundles/eye3caminos/js/flot/jquery.flot.resize.min.js') }}" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
					xrango();
        });
		
		
		

		function xrango() {
		
			$.resize.throttleWindow = false;
			
			<!-- $('.tabla').css({'display': 'none'}); -->
			<!-- $('.graficos').css({'display': ''}); -->
			
			{% set colores = ["#EE3830", "#F47A2C", "#9CCC51", "#00828F", "#6C56A4", "#C44A72", "#F05A30", "#FAAB33", "#FDDF16", "#00AC5C", "#2E57A7" , "#9256A2" ] %}
				{% set contador = 0 %}
				
				  <!-- var placeholder1 = $('#placeholder1').css({'width':'90%' , 'min-height':'300px'}); -->
				  var placeholder2 = $('#placeholder2').css({'width':'90%' , 'min-height':'300px'});
					
				 
		 var graficame1 = { data: [
					{% for i in grafico %}
						[{{i.fecha|date("U")}}000, {{i.agua}}]
						{% if not loop.last %},{% endif %}
						{%set contador = contador +1 %}
					{% endfor %}
					], color: "{{ cycle(colores, contador ) }}", bars: { show: true, barWidth: 20 }};
				  	 
		 var graficame2 = { data: [
					{% for i in grafico %}
						[{{i.fecha|date_modify("+3 hour")|date("U")}}000, {{i.aditivo}}]
						{% if not loop.last %},{% endif %}
						{%set contador = contador +1 %}
					{% endfor %}
					], color: "{{ cycle(colores, contador ) }}", bars: { show: true }};
				  
				
		
			  $.plot(placeholder2, [graficame1,graficame2], {
							axisLabels: {
								show: true
							},xaxis: { 
									mode: "time" ,
									min : {{(grafico|first)["fecha"]|date_modify("-1 day")|date("U")}}000,   
									max : {{(grafico|last)["fecha"]|date_modify("-1 day")|date("U")}}000,   
									tickSize: [1, "day"],
									axisLabel: 'Fecha'
							},yaxis: { 
									axisLabel: 'Liquidos(m3)'
							}});
			
			
			  //pie chart tooltip example
			  var $tooltip = $("<div class='tooltip top in'><div class='tooltip-inner'></div></div>").hide().appendTo('body');
			  var previousPoint = null;

			

			placeholder2.on('plothover', function (event, pos, item) {alert("tip");
				if(item) {
						var tip =  "algo";
						$tooltip.show().children(0).text(tip);
					
					$tooltip.css({top:pos.pageY + 10, left:pos.pageX + 10});
				} else {
					$tooltip.hide();
					previousPoint = null;
				}
				
			 });
			 
			 {#
			 
			
			

		#}
			
			}
			
		function tabla() {
		
			$.resize.throttleWindow = false;
			
			$('.graficos').css({'display': 'none'});
			$('.tabla').css({'display': ''});
			
			}
		
        jQuery(function($) {

								//or change it into a date range picker
								$('.input-daterange').datepicker({
										autoclose:true,
                                        weekStart: 1,
                                        language: "es",
                                        format: "dd-mm-yyyy"
								})
							
				
                                //show datepicker when clicking on the icon
                                .next().on(ace.click_event, function(){
                                        $(this).prev().focus();
                                });
								

                        });

</script>	

{% endblock %}