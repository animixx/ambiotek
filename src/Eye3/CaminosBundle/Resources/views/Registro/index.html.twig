{% extends '::base.html.twig' %}

{% block stylesheets %}
{{ parent() }}
                <link rel="stylesheet" href="{{ asset('bundles/eye3caminos/css/datepicker.css') }}" />
                <link rel="stylesheet" href="{{ asset('bundles/eye3caminos/css/datepicker3.css') }}" />

{% endblock %}


{% block body %}



{% set meses = ["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"] %}
		<div class="col-12">
			<div class="page-header"><h1>Registro </h1></div>
		</div>
		<div class="col-12">
			<div class="col-sm-6 col-sm-offset-2 col-xs-12 table-responsive">
					<table id="mensual" class="table table-striped table-bordered table-hover">
						<thead>
							<tr>
								<th class="hidden">contador</th>
								<th class="center">
									Mes
								</th>
								<th class="center">
									Medici√≥n Polvo
								</th>
								<th class="center">
									Consumo Liquidos
								</th>
							
								
							</tr>
						</thead>
						<tbody>
						{% set contador = 1 %}
						{% for anyo in ("now"|date("Y"))..(desde|date("Y")) %}
						{% set comienzo = ((loop.first)?("now"|date("n"))-1:11)%}
						{% set termino = ((loop.last)?(desde|date("n"))-1:0)%}
						
							{% for innermes in comienzo..termino %}
								<tr>
									<td class="hidden"> {{contador}}{% set contador = contador + 1 %} </td>
									<td class="center">
										{{meses[(innermes)]}}-{{anyo}}
									</td>
									<td class="center">
										<a class="green" href='{{path('genera_excel',{'fecha':anyo~'/'~(innermes+1)})}}'><i class="fa fa-file-excel-o fa-2x"></i></a>
									</td>
									<td class="center">
										<a class="red" href="#"{#{path('reporte_mensual',{'fecha':anyo~'/'~(innermes+1),'descarga':'D'})}#}><i class="fa fa-file-excel-o fa-2x"></i></a>
									</td>
								</tr>
							{% endfor %}
						{% endfor %}
						
						</tbody>
				</table>
			</div>
		</div>
	
<!-- basic scripts en base -->
		<!--[if !IE]> -->
		<script type="text/javascript">
			window.jQuery || document.write("<script src='{{asset('bundles/eye3caminos/js/jquery.min.js')}}'>"+"<"+"/script>");
		</script>

		<!-- <![endif]-->

		<!--[if IE]>
		<script type="text/javascript">
		 window.jQuery || document.write("<script src='{{asset('bundles/eye3caminos/js/jquery1x.min.js')}}'>"+"<"+"/script>");
		</script>
		<![endif]-->
		
		<script type="text/javascript">
			if('ontouchstart' in document.documentElement) document.write("<script src='{{asset('bundles/eye3caminos/js/jquery.mobile.custom.min.js')}}'>"+"<"+"/script>");
		</script>
			
			
		 {% javascripts 
			'bundles/eye3caminos/js/jquery.dataTables.min.js'
			'bundles/eye3caminos/js/jquery.dataTables.bootstrap.js'
			'bundles/eye3caminos/js/date-time/bootstrap-datepicker.js'
			'bundles/eye3caminos/js/date-time/locales/bootstrap-datepicker.es.js'
            %}
            <script src="{{ asset_url }}" type="text/javascript"></script>
        {% endjavascripts %}


	
		
<script type="text/javascript">
$(document).ready(function(){
    $(".showinfo").tooltip();
	

	 $('#mensual').dataTable({
							"dom": '<"row"<"col-xs-12 col-sm-6"l><"col-xs-12 col-sm-6"f>>rt<"row"p>',
							"columnDefs": [
												{
													"targets": [ 0 ],
													"searchable": false,
													"sortable": false
												},
												{
													"targets": [ 1 ],
													orderData: [ 0 ],
												},
												{
													"targets": [ 2,3 ],
													"searchable": false,
													"sortable": false
												}
											],
							"order": [[ 1, "asc" ]],
							"bStateSave": true,
							"info":     false});
});

        jQuery(function($) {



                                //datepicker plugin
                                //link
                                $('.date-picker').datepicker({
                                        autoclose: true,
                                        weekStart: 1,
                                        language: "es",
                                        todayBtn: "linked",
                                        format: "dd-mm-yyyy",
                                        todayHighlight: true
                                })
                                //show datepicker when clicking on the icon
                                .next().on(ace.click_event, function(){
                                        $(this).prev().focus();
                                });


                        });

</script>		

{% endblock %}
